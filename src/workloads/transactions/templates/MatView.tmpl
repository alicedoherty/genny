# This workload is developed to test materialized view maintenance.

SchemaVersion: 2018-07-01
Owner: "@mongodb/query"
Description: |
  Materialize views: Insert into the base collection.

ExperimentParameters: &ExprParams
  Transactional: $__isTransactional__
  NumInitialDocs: $__numInitialDocs__
  BaseDocumentSizePaddingBytes: $__minBaseDocSizeBytes__
  NumGroupsAndDistribution: {^RandomInt: $__numGroupsAndDistribution__}
  ClientThreads: $__numClientThreads__
  NumInsertBatchesPerClinet: $__numClientBatches__
  NumInsertOpsPerClinetBatch: $__numInsertsPerClientBatch__
  ClientBatchInsertMode: "$__insertMode__"
  NumMatViews: $__numMatViews__
  MatViewMaintenanceMode: "$__matViewMode__"

ExperimentDefaults:
  PhasePath: &PhasePath ./$__matViewParamsFile__

Actors:
  LoadConfig:
    Path: *PhasePath
    Key: ActorsConf
    Parameters: *ExprParams

AutoRun:
- LoadConfig:
    Path: *PhasePath
    Key: AutoRunConf
    Parameters: *ExprParams
