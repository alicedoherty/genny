# This workload is developed to test materialized view maintenance.

SchemaVersion: 2018-07-01
Owner: "@mongodb/query"
Description: |
  Materialize views: Insert into the base collection.

ExperimentParameters: &ExprParams
  Transactional: false
  NumInitialDocs: 100000
  BaseDocumentSizePaddingBytes: 1000
  NumGroupsAndDistribution: {^RandomInt: {distribution: binomial, t: 100, p: 0.05}}
  ClientThreads: 1
  NumInsertBatchesPerClinet: 100
  NumInsertOpsPerClinetBatch: 100
  ClientBatchInsertMode: "insertOne"
  NumMatViews: 8
  MatViewMaintenanceMode: "incremental"

ExperimentDefaults:
  PhasePath: &PhasePath ./MatViewParamsSharded.yml

Actors:
  LoadConfig:
    Path: *PhasePath
    Key: ActorsConf
    Parameters: *ExprParams

AutoRun:
- LoadConfig:
    Path: *PhasePath
    Key: AutoRunConf
    Parameters: *ExprParams
