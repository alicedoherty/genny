# This workload is developed to test the performance of materialized view maintenance.

SchemaVersion: 2018-07-01
Owner: "@mongodb/query"
Description: |
  Materialize views experiments with 4 client(s).

ExperimentParameters: &ExprParams
  Transactional: False
  NumInitialDocs: 10000
  BaseDocumentSizePaddingBytes: 1000
  NumGroupsAndDistribution: {^RandomInt: {distribution: uniform, min: 1, max: 100}}
  ClientThreads: 4
  NumInsertBatchesPerClinet: 100
  NumInsertOpsPerClinetBatch: 100
  ClientBatchInsertMode: "insertOne"
  NumMatViews: 1
  MatViewMaintenanceMode: "async-incremental-result-delta-not-colocated"

ExperimentDefaults:
  PhasePath: &PhasePath ./MatViewParamsReplicated.yml

Actors:
  LoadConfig:
    Path: *PhasePath
    Key: ActorsConf
    Parameters: *ExprParams

AutoRun:
- When:
    mongodb_setup:
      $eq:
      - replica
      - single-replica

