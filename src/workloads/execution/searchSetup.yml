SchemaVersion: 2018-07-01
Owner: "@mongodb/query"
Description: |
  This is a manual setup for searchXyz.yml workflows. Command to run:
  ./run-genny workload src/workloads/execution/searchSetup.yml

GlobalDefaults:
  dbname: &db test
  MaxPhases: &MaxPhases 20
  batchSize: &batchSize 30000
  textField: &field "searchableField"
  nop: &Nop {Nop: true}

Clients:
  Default:
    URI: "mongodb://__system:keyfile@localhost:27017/local"

Actors:
- Name: InsertData
  Type: Loader
  Threads: 1
  Phases:
  - Repeat: 1
    Database: *db
    Threads: 1
    CollectionCount: 1
    DocumentCount: 100000
    BatchSize: *batchSize
    Document:
      searchableField: {^FastRandomString: {length: {^RandomInt: {min: 1, max: 3}}, alphabet: "abcd"}}
      otherFieldFirst: {^RandomInt: {min: 0, max: 10000}}
      otherFieldSecond: {^FastRandomString: {length: {^RandomInt: {min: 20, max: 100}}, alphabet: "abcdefghijklmnopqrstuvwxyz"}}
